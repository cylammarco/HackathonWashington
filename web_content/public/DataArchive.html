<!DOCTYPE html>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.5.1/min/dropzone.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
        </link>
        <link rel="stylesheet" href="stylesheets/style.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.5.1/min/basic.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.5.1/min/dropzone.min.css">
    </head>
    <body>
        <h1>Ensemble Photometry</h1>
        <form action="/upload-images" class="dropzone" id="my-awesome-dropzone"></form>
        <br>
        <button id="submit-files" onclick="javascripts:showGenerateSextract()">Upload Files & Generate Filelist</button>
        <br>
        <button id="generate-sextract" onclick="javascripts:showSourceExtract()">Generate Source Extract Script</button>
        <br>
        <button id="source-extract" onclick="javascripts:showGenerateLightcurve()">Source Extract</button>
        <br>
        <button id="generate-lightcurve" onclick="javascripts:generateLightcurve()">Generate Lightcurve</button>
        <br>
        <button id="display-lightcurve" onclick="javascripts:displayLightcurve()">Display Lightcurve</button>
        <br>
        <div id="imageBox">
        <script src="javascripts/common.js"></script>
        <script>
            function init() {
              document.getElementById('submit-files').style.display = "block";
              document.getElementById('generate-sextract').style.display = "block";
              document.getElementById('source-extract').style.display = "block";
              document.getElementById('generate-lightcurve').style.display = "block";
            }
            
            function showGenerateSextract() {
              e = document.getElementById('generate-sextract');
              e.style.display = "block";
            }
            
            function showSourceExtract() {
              e = document.getElementById('source-extract');
              e.style.display = "block";
             $.post('/generate-sextract');
            }
            
            function showGenerateLightcurve() {
              e = document.getElementById('generate-lightcurve');
              e.style.display = "block";
             $.post('/source-extract');
            }
            
            function generateLightcurve() {
              $.post('/ensemble-photometry');
            }
            
            function displayLightcurve() {
              $("#imageBox").html("<img src=/");
              $("#imageBox").html("<img src=/images/EnsemblePhotometry.png>")
            }
            
            $(document).ready(function () {
              init();
            });
            
        </script>
    </body>
</html>
